<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <title>Car detection</title>
        {% load static %}
        <link rel="stylesheet" href="{% static 'detection/style.css' %}" type="text/css"/>
        <script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css" type="text/css" />
    </head>

    <body>
        <h1>
            Car detection
        </h1>

        <form action="/"
              class="dropzone"
              id="car-dropzone">{% csrf_token %}</form>
        <div class="box">
            <img id="car-detection-result" src="">
        </div>
    </body>

    <script>
        Dropzone.options.carDropzone = {
            acceptedFiles: "image/*",
            dictDefaultMessage: "Drop files here to detect cars",
            init: function() {
                this.on("success", function(file, serverResponse) {
                    showImg('data:image/jpeg;base64,' + serverResponse);
                });
            }
            };
        function showImg(img) {
            var resultImg = document.getElementById('car-detection-result');
            resultImg.src = img
        }
    </script>
</html>
